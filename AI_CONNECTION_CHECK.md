# AI 모델 연동 확인 가이드

## ✅ AI 모델이 연동되어 있는지 확인하는 방법

### 방법 1: 프론트엔드에서 확인 (가장 쉬움)

1. **AI 예측 페이지 접속**
   - 브라우저에서 `http://localhost:3000/ai-prediction` 접속
   - 또는 메뉴에서 "🤖 AI 예측" 클릭

2. **모델 정보 확인**
   - 페이지가 로드되면 자동으로 모델 정보가 표시됩니다
   - 다음 정보가 보이면 연동 성공:
     - ✅ 입력 Shape: `[null, 128, 63, 1]` 또는 유사한 값
     - ✅ 출력 Shape: `[null, 7]` 또는 유사한 값
     - ✅ 레이어 수: 숫자
     - ✅ 파라미터 수: 숫자

3. **실제 예측 테스트**
   - "🎲 샘플 데이터 생성" 버튼 클릭
   - "🔮 예측 실행" 버튼 클릭
   - 예측 결과가 표시되면 정상 작동 중!

### 방법 2: 백엔드 로그 확인

백엔드 콘솔에서 다음 로그를 확인:

```
✅ 정상 작동 시:
- "ML 서비스 호출: http://localhost:5000/api/predict"
- "ML 서비스 응답 처리 성공"

❌ 문제 발생 시:
- "ML 서비스 호출 실패"
- "ML 서비스 연결 실패"
```

### 방법 3: Python ML 서비스 로그 확인

Python ML 서비스 콘솔에서 다음 로그를 확인:

```
✅ 정상 작동 시:
- "✅ 모델 로드 성공!"
- "입력 shape: (None, 128, 63, 1)"
- "출력 shape: (None, 7)"
- "INFO:werkzeug:127.0.0.1 - - [날짜] "POST /api/predict HTTP/1.1" 200 -"

❌ 문제 발생 시:
- "⚠️ 경고: 모델 파일을 찾을 수 없습니다"
- "ERROR" 메시지
```

### 방법 4: API 직접 테스트

브라우저에서 다음 URL 접속:
```
http://localhost:8080/api/ml/model/info
```

로그인 토큰이 필요하므로, 브라우저 개발자 도구(F12)에서:
1. Network 탭 열기
2. 프론트엔드에서 AI 예측 페이지 접속
3. `/api/ml/model/info` 요청 확인

### 방법 5: Main 페이지에서 실시간 확인

1. **Main 페이지 접속** (`http://localhost:3000`)
2. **마이크 활성화 확인**
   - 환경설정에서 마이크가 켜져 있는지 확인
3. **A동 1층 상태 확인**
   - 마이크가 켜져 있으면 3초마다 자동으로 AI 분석 수행
   - 위험 소리 감지 시 빨간색 경고 표시
   - 백엔드 로그에서 "ML 서비스 호출" 메시지 확인

## 🔍 연동 상태 체크리스트

- [ ] Python ML 서비스가 실행 중인가? (`http://localhost:5000`)
- [ ] 백엔드가 실행 중인가? (`http://localhost:8080`)
- [ ] 프론트엔드가 실행 중인가? (`http://localhost:3000`)
- [ ] 모델 파일이 `ml_service/models/final_model.h5`에 있는가?
- [ ] AI 예측 페이지에서 모델 정보가 표시되는가?
- [ ] 샘플 데이터로 예측이 성공하는가?
- [ ] Main 페이지에서 마이크 모니터링이 작동하는가?

## 🚨 문제 해결

### 모델 정보가 표시되지 않는 경우
1. Python ML 서비스가 실행 중인지 확인
2. `ml_service/models/final_model.h5` 파일이 있는지 확인
3. Python 서비스 콘솔에서 에러 메시지 확인

### 예측이 실패하는 경우
1. 백엔드 로그에서 에러 메시지 확인
2. Python ML 서비스 로그에서 에러 메시지 확인
3. 입력 데이터 형식이 올바른지 확인 (8064개 값 필요)

### 연결 오류가 발생하는 경우
1. `application.yml`에서 `ml.service.url` 확인
2. Python ML 서비스가 `http://localhost:5000`에서 실행 중인지 확인
3. 방화벽이나 보안 소프트웨어가 차단하지 않는지 확인

